{"version":3,"sources":["Promise.js","Route.js","app.js","pages/bookInit.js","pages/wordInit.js","common/extensions/ArrayExtensions.js","common/extensions/StringExtensions.js","common/helpers/UrlHelper.js","common/helpers/formsHelper.js","common/helpers/popups.js","common/helpers/select2helper.js","pages/tablesFilters/tablesFilters.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"content/js/site.js","sourcesContent":["Promise = function (asyncFunction) {\r\n\r\n  var states = {\r\n    PENDING: 0,\r\n    FULFILLED: 1,\r\n    REJECTED: 2\r\n  };\r\n\r\n  this.state = states.PENDING;\r\n  this.result = null;\r\n  var self = this;\r\n\r\n  this.resolve = function () {\r\n    self.state = states.FULFILLED;\r\n    self.result = [].slice.call(arguments, 0);\r\n\r\n    if (self.onFulfilled) {\r\n      self.onFulfilled.apply(self, self.result);\r\n    }\r\n  }\r\n\r\n  this.reject = function () {\r\n    self.state = states.REJECTED;\r\n    self.result = [].slice.call(arguments, 0);\r\n\r\n    if (self.onRejected) {\r\n      self.onRejected.apply(self, self.result);\r\n    }\r\n  }\r\n\r\n  this.setOnFulfilledHandler = function (onFulfilled) {\r\n    if (this.state === states.FULFILLED && onFulfilled) {\r\n      onFulfilled.apply(this, this.result);\r\n    } else {\r\n      this.onFulfilled = onFulfilled;\r\n    }\r\n  }\r\n\r\n  this.setOnRejectedHandler = function (onRejected) {\r\n    if (this.state === states.REJECTED && onRejected) {\r\n      onRejected.apply(this, this.result);\r\n    } else {\r\n      this.onRejected = onRejected;\r\n    }\r\n  }\r\n\r\n  try {\r\n    asyncFunction(this.resolve, this.reject);\r\n  } catch (ex) {\r\n    this.reject(ex);\r\n  }\r\n\r\n  return this;\r\n}\r\n\r\nPromise.prototype.then = function (onFulfilled, onRejected) {\r\n\r\n  this.setOnFulfilledHandler(onFulfilled);\r\n  this.setOnRejectedHandler(onRejected);\r\n  return this;\r\n};\r\n\r\nPromise.prototype.catch = function (onRejected) {\r\n  this.setOnRejectedHandler(onRejected);\r\n  return this;\r\n};\r\n","var Route = (function () {\r\n\r\n  function Route(test, exec) {\r\n\r\n    this.routeValues = {};\r\n\r\n    if (typeof test === 'string') {\r\n      this.testFunc = getTestFunction(test);\r\n    } else {\r\n      this.testFunc = test;\r\n    }\r\n\r\n    this.execFunc = exec;\r\n  };\r\n\r\n  Route.prototype.test = function (url) {\r\n    return this.testFunc.call(this, url);\r\n  };\r\n\r\n  Route.prototype.exec = function () {\r\n    return this.execFunc.call(this);\r\n  };\r\n\r\n  function getTestFunction(urlPattern) {\r\n    var keys = [];\r\n\r\n    var regexpStr = urlPattern\r\n        .replace(/{(.+?)}/g, function (match, group) {\r\n          var pair = group.split(':'); // key:type\r\n          keys.push(pair[0]);\r\n\r\n          if (pair[1] === 'Guid') {\r\n            return '([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})';\r\n          }\r\n          return '([^/]+)';\r\n        })\r\n        .replace(/\\//g, '\\\\/');\r\n\r\n    var regexp = new RegExp(regexpStr, 'i');\r\n\r\n    return function (url) {\r\n      var result = regexp.exec(url);\r\n      if (result) {\r\n        for (var i = 1; i < result.length; ++i) {\r\n          this.routeValues[keys[i - 1]] = result[i];\r\n        }\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n  return Route;\r\n}());\r\n","var App = (function () {\r\n\r\n  var app = {};\r\n\r\n  // Маршрутизация\r\n  app.routes = [];\r\n  app.routes.mapRoute = function (path, exec) {\r\n    this.push(new Route(path, exec));\r\n    return this;\r\n  };\r\n\r\n  app.navigate = function (url) {\r\n    history.pushState({}, null, url);\r\n    window.onpopstate();\r\n  };\r\n\r\n  window.onpopstate = function () {\r\n    for (var i = 0; i < app.routes.length; ++i) {\r\n      if (app.routes[i].test(window.location.href)) {\r\n        app.routes[i].exec();\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  return app;\r\n}());\r\n\r\n/**\r\n * @type {UrlHelper}\r\n */\r\nvar Url;\r\n","var Book = (function () {\r\n  var\r\n    addUrl,\r\n    showUrl,\r\n    editUrl,\r\n    deleteUrl,\r\n    tableId;\r\n\r\n  function deleteObjects(ids, mess) {\r\n    if (ids.length > 0) {\r\n      if (confirm('Вы действительно хотите удалить ' + mess + '?')) {\r\n        $.ajax({\r\n          url: deleteUrl,\r\n          type: 'POST',\r\n          dataType: 'json',\r\n          data: {\r\n            ids: ids\r\n          }\r\n        })\r\n        .success(function (result) {\r\n          if (result.result) {\r\n            if (tableId != null) {\r\n              $(tableId).DataTable().draw();\r\n            }\r\n          } else {\r\n            alert(\"Ошибка удаления\");\r\n          }\r\n        })\r\n        .error(function (xhr, status, statusCode) {\r\n          console.log(status + ': ' + statusCode, xhr);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  function onSaved(data, status, xhr) {\r\n    if (data.id) {\r\n      $('.modal').modal('hide');\r\n      navigateFromEditWindow(data.id);\r\n    }\r\n    $(tableId).DataTable().ajax.reload(null, false);\r\n  }\r\n\r\n  function navigateFromEditWindow(id) {\r\n    if (id && id > 0) {\r\n      Popups.showPopup(showUrl.format(id), {}, $('#object-show-content'), $('#object-show'));\r\n    }\r\n  }\r\n\r\n  function init() {\r\n    addUrl = Url.action('api/books/add');\r\n    showUrl = Url.action('api/books/{0}');\r\n    editUrl = Url.action('api/books/{0}/edit');\r\n    deleteUrl = Url.action('api/books/del');\r\n    tableId = '#BookListItemViewModelTable';\r\n\r\n    $(document)\r\n      .on('keydown.dismiss.bs.modal', '#object-edit', function (e) {\r\n        if (e.keyCode === 27) {\r\n          var id = $('#object-save').data('id');\r\n          navigateFromEditWindow(id);\r\n          e.preventDefault();\r\n        }\r\n      })\r\n      .on('click', '#object-edit-close', function () {\r\n        var id = $('#object-save').data('id');\r\n        navigateFromEditWindow(id);\r\n      })\r\n      .on('click', '#object-del', function () {\r\n        deleteObjects([$(this).data('id')], 'эту книгу');\r\n      })\r\n    .on('click', '#object-edit-btn', function () {\r\n      Popups.showPopup(editUrl.format($(this).data('id')), null, $('#object-edit-content'), $(\"#object-edit\"));\r\n    });\r\n  }\r\n\r\n  function show(option) {\r\n    Popups.showPopup(showUrl.format(option.id), {}, $('#object-show-content'), $('#object-show'));\r\n  }\r\n\r\n  function add() {\r\n    Popups.showPopup(addUrl, null, $('#object-edit-content'), $(\"#object-edit\"));\r\n  }\r\n\r\n  return {\r\n    init: init,\r\n    show: show,\r\n    del: deleteObjects,\r\n    add: add,\r\n    OnSaved: onSaved\r\n  };\r\n}())\r\n","var Word = (function () {\r\n\r\n  var addUrl,\r\n    showUrl,\r\n    editUrl,\r\n    deleteUrl,\r\n    tableId;\r\n\r\n  function initTable(option) {\r\n\r\n    var table = $('#' + option.id).DataTable();\r\n\r\n    if (option.row) {\r\n      table.row('.table-data-empty').remove().draw(false);\r\n      var controlRow = table.row('.locality-road-table-tr').data();\r\n\r\n      table.row('.locality-road-table-tr').remove().draw(false);\r\n      table.row.add(option.row).draw(false);\r\n      table.row.add(controlRow).draw();\r\n\r\n      table.rows().every(function (rowIdx, tableLoop, rowLoop) {\r\n        var control = this.node();\r\n        var data = this.data();\r\n\r\n        $(control).attr('id', 'row_' + rowIdx);\r\n\r\n        if (data == controlRow) {\r\n          $(control).addClass('locality-road-table-tr');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  function deleteObjects(ids, mess) {\r\n    if (ids.length > 0) {\r\n      if (confirm('Вы действительно хотите удалить ' + mess + '?')) {\r\n        $.ajax({\r\n          url: deleteUrl,\r\n          type: 'POST',\r\n          dataType: 'json',\r\n          data: {\r\n            ids: ids\r\n          }\r\n        })\r\n        .success(function (result) {\r\n          if (result.result) {\r\n            if (tableId != null) {\r\n              $(tableId).DataTable().draw();\r\n            }\r\n          } else {\r\n            alert(\"Ошибка удаления\");\r\n          }\r\n        })\r\n        .error(function (xhr, status, statusCode) {\r\n          console.log(status + ': ' + statusCode, xhr);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  function onSaved(data, status, xhr) {\r\n    if (data.id) {\r\n      $('.modal').modal('hide');\r\n      navigateFromEditWindow(data.id);\r\n    }\r\n    $(tableId).DataTable().ajax.reload(null, false);\r\n  }\r\n\r\n  function navigateFromEditWindow(id) {\r\n    if (id && id > 0) {\r\n      Popups.showPopup(showUrl.format(id), {}, $('#object-show-content'), $('#object-show'));\r\n    }\r\n  }\r\n\r\n  function init(option) {\r\n    addUrl = Url.action('api/words/add');\r\n    showUrl = Url.action('api/words/{0}');\r\n    editUrl = Url.action('api/words/{0}/edit');\r\n    deleteUrl = Url.action('api/words/del');\r\n    tableId = '#WordListItemViewModelTable';\r\n    delWordBookUrl = Url.action('api/words/edit/book/delete');\r\n    addWordBookUrl = Url.action('api/words/edit/book/add');\r\n\r\n    $(document)\r\n      .on('keydown.dismiss.bs.modal', '#object-edit', function (e) {\r\n        if (e.keyCode === 27) {\r\n          var id = $('#object-save').data('id');\r\n          navigateFromEditWindow(id);\r\n          e.preventDefault();\r\n        }\r\n      })\r\n      .on('click', '#object-edit-close', function () {\r\n        var id = $('#object-save').data('id');\r\n        navigateFromEditWindow(id);\r\n      })\r\n      .on('click', '#object-del', function () {\r\n        deleteObjects([$(this).data('id')], 'это слово');\r\n      })\r\n      .on('click', '#object-edit-btn', function () {\r\n        Popups.showPopup(editUrl.format($(this).data('id')), null, $('#object-edit-content'), $(\"#object-edit\"));\r\n      })\r\n      .on('click', '#addWordBook', function () {\r\n        var control = $(this);\r\n        var table = $('#wordbooksTable tbody');\r\n        var inputChell = $('#wordbooksTable tbody tr').last();\r\n        var first = $('#wordbooksTable tbody tr').first().text().indexOf('Записи отсутствуют') > -1;\r\n        var books = $('#SelectedWordBook_SelectedBookId option');\r\n        var rows = $('#SelectedWordBook_SelectedRowId option');\r\n        console.log(books, rows);\r\n\r\n        $('#wordbooksTable_processing').attr('style', 'display: block;');\r\n        $.ajax({\r\n          url: addWordBookUrl,\r\n          type: 'POST',\r\n          data: {\r\n            SelectedBookId: $('#SelectedWordBook_SelectedBookId').val(),\r\n            Book: $('#SelectedWordBook_Book').val(),\r\n            Number: $('#SelectedWordBook_Number').val(),\r\n            DateRecord: $('#SelectedWordBook_DateRecord').val(),\r\n            SelectedRowId: $('#SelectedWordBook_SelectedRowId').val(),\r\n            Up: $('#SelectedWordBook_Up').val(),\r\n            LineNumber: $('#SelectedWordBook_LineNumber').val()\r\n          }\r\n        })\r\n        .success(function (result) {\r\n          console.log(result.result);\r\n          if (result.result) {\r\n            var addedTr = '';\r\n            $.each(result.result, function (idx, wb) {\r\n              var rowsCount = 1;\r\n              var pages = '';\r\n              $.each(wb.Pages, function (idx, pg) {\r\n                var lines = '';\r\n                var rowspanLine = pg.Lines.length + 1;\r\n                rowsCount += (rowspanLine);\r\n                var date;\r\n                var colspan = 1;\r\n\r\n                var row = '';\r\n                if (pg.RowId) {\r\n                  rows.each(function (idx, rowItem) {\r\n                    if (rowItem.value == pg.RowId) {\r\n                      row = rowItem.text;\r\n                    }\r\n                  });\r\n                } else if (wb.Row && wb.Row.Name) {\r\n                  row = pg.Row.Name;\r\n                }\r\n\r\n                var number = pg.Number + \" \" + row;\r\n                var minus = '';\r\n                if (pg.DateRecord) {\r\n                  console.log(pg.DateRecord.replace('/Date(', '').replace(')/', ''));\r\n                  date = new Date(pg.DateRecord.replace('/Date(', '').replace(')/', ''));\r\n                  colspan = 2;\r\n                  number = date.toString();\r\n                  minus = '<span class=\"input-group-btn\"><a class=\"pull-right btn btn-sm btn-default no-borders\" id=\"delWordBook\"><i class=\"fa fa-minus\"></i></a></span>';\r\n                } else {\r\n                  $.each(pg.Lines, function (idx, line) {\r\n                    var data = line.Up ? \"<i class='fa fa-long-arrow-down' />\" + line.Number : \"<i class='fa fa-long-arrow-up' />\" + line.Number;\r\n                    lines += '<tr><td class=\"text-center\"><div class=\"input-group\">' + data + '<span class=\"input-group-btn\">' +\r\n                      '<a class=\"pull-right btn btn-sm btn-default no-borders\" id=\"delWordBook\"><i class=\"fa fa-minus\"></i></a>' +\r\n                      '</span></div></td></tr>';\r\n                  });\r\n                }\r\n                pages += '<tr><td class=\"text-center\" rowspan=\"' + rowspanLine + '\" colspan=\"' + colspan + ')\"> <div class=\"input-group\"><div class=\"input-group\">' + number + ' </div>' + minus + ' </div></tr>' +\r\n                  lines;\r\n              });\r\n              var book = '';\r\n              if (wb.BookId) {\r\n                books.each(function (idx, bookItem) {\r\n                  if (bookItem.value == wb.BookId) {\r\n                    book = bookItem.text;\r\n                  }\r\n                });\r\n              } else if (wb.Book && wb.Book.Name) {\r\n                book = wb.Book.Name;\r\n              }\r\n              addedTr += '<tr><td class=\"text-center\" rowspan=\"' + rowsCount + '\">' + book + ' </td></tr>' + pages;\r\n            });\r\n\r\n            $('#wordbooksTable tbody').html(addedTr + '<tr>' + inputChell.html() + '</tr>');\r\n\r\n          }\r\n        })\r\n        .error(function (xhr, status, statusCode) {\r\n          $('#wordbooksTable_processing').attr('style', 'display: none;');\r\n          console.log(status + ': ' + statusCode);\r\n        });\r\n      })\r\n      .on('click', '#delWordBook', function () {\r\n        var control = $(this);\r\n        var table = $('#wordbooksTable').DataTable();\r\n\r\n        $('#wordbooksTable_processing').attr('style', 'display: block;');\r\n        $.ajax({\r\n          url: delWordBookUrl,\r\n          type: 'POST',\r\n          data: {\r\n            SelectedBookId: $('#SelectedWordBook_SelectedBookId').val(),\r\n            Book: $('#SelectedWordBook_Book').val(),\r\n            Number: $('#SelectedWordBook_Number').val(),\r\n            DateRecord: $('#SelectedWordBook_DateRecord').val(),\r\n            SelectedRowId: $('#SelectedWordBook_SelectedRowId').val(),\r\n            Up: $('#SelectedWordBook_Up').val(),\r\n            LineNumber: $('#SelectedWordBook_LineNumber').val()\r\n          }\r\n        })\r\n        .success(function (result) {\r\n          console.log(result);\r\n        })\r\n        .error(function (xhr, status, statusCode) {\r\n          $('#wordbooksTable_processing').attr('style', 'display: none;');\r\n          console.log(status + ': ' + statusCode);\r\n        });\r\n      });\r\n  }\r\n\r\n  function show(option) {\r\n    Popups.showPopup(showUrl.format(option.id), {}, $('#object-show-content'), $('#object-show'));\r\n  }\r\n\r\n  function add() {\r\n    Popups.showPopup(addUrl, null, $('#object-edit-content'), $(\"#object-edit\"));\r\n  }\r\n\r\n  return {\r\n    init: init,\r\n    show: show,\r\n    del: deleteObjects,\r\n    add: add,\r\n    OnSaved: onSaved\r\n  };\r\n}())\r\n","Array.prototype.contains = function (value) {\r\n  return this.indexOf(value) > -1;\r\n};\r\n\r\nArray.prototype.removeValue = function (value) {\r\n  var index = this.indexOf(value);\r\n  if (index > -1) {\r\n    this.splice(index, 1);\r\n  }\r\n};\r\n","String.prototype.format = function () {\r\n  var args = arguments;\r\n  return this.replace(/{([\\d|\\w]+)}/g, function (match, key) {\r\n    var value = isNaN(key) ? args[0][key] : args[key];\r\n    return typeof value != 'undefined' ? value : match;\r\n  });\r\n};\r\n\r\nString.format = function (format) {\r\n  var args = Array.prototype.slice.call(arguments, 1);\r\n  return format.replace(/{(\\d+)}/g, function (match, number) {\r\n    return typeof args[number] != 'undefined'\r\n      ? args[number]\r\n      : match;\r\n  });\r\n};\r\n","/**\r\n * Представляет методы для работы с URL\r\n */\r\nvar UrlHelper = (function () {\r\n\r\n  function UrlHelper(baseUrl) {\r\n    this.baseUrl = baseUrl;\r\n  }\r\n\r\n  UrlHelper.prototype.api = function (relativePath) {\r\n    return this.baseUrl + relativePath;\r\n  };\r\n\r\n  UrlHelper.prototype.action = function (relativePath) {\r\n    return this.baseUrl + relativePath;\r\n  };\r\n\r\n  UrlHelper.prototype.content = function (relativePath) {\r\n    return this.baseUrl + relativePath;\r\n  };\r\n\r\n  UrlHelper.prototype.icon = function (iconName) {\r\n    return this.baseUrl + 'Content/Icons/' + iconName;\r\n  };\r\n\r\n  UrlHelper.prototype.getQueryStringParams = function (url) {\r\n    var m = url.match(/\\?([^#]*)/);\r\n    if (m === null)\r\n      return {};\r\n    var a = m[1].split('&');\r\n    var b = {};\r\n\r\n\r\n    for (var i = 0; i < a.length; ++i) {\r\n      var p = a[i].split('=', 2);\r\n      var key = p[0];\r\n      var value = p.length > 1 ? decodeURIComponent(p[1].replace(/\\+/g, \" \")) : '';\r\n\r\n      if (key in b) {\r\n        if (!Array.isArray(b[key])) {\r\n          b[key] = [b[key]];\r\n        }\r\n        b[key].push(value);\r\n      } else {\r\n        b[key] = value;\r\n      }\r\n    }\r\n    return b;\r\n  };\r\n\r\n  UrlHelper.prototype.map = function (objectType, ids) {\r\n    if (typeof ids.join === \"function\") {\r\n      ids = ids.join(',');\r\n    }\r\n    return this.baseUrl + '?show=' + objectType + '.' + ids;\r\n  };\r\n\r\n  return UrlHelper;\r\n}());\r\n","function disableSubmitOnEditForm() {\r\n  $('#object-edit-content button[type=\"submit\"]').attr('disabled', 'disabled');\r\n  $('#recovery-password-content button[type=\"submit\"]').attr('disabled', 'disabled');\r\n  $('#change-password-content button[type=\"submit\"]').attr('disabled', 'disabled');\r\n  $('#login-content button[type=\"submit\"]').attr('disabled', 'disabled');\r\n}\r\n\r\n//TODO нужно переименовать и в объект сложить\r\nfunction removeDisabledSubmit() {\r\n  $('#object-edit-content button[type=\"submit\"]').removeAttr('disabled');\r\n  $('#recovery-password-content button[type=\"submit\"]').removeAttr('disabled');\r\n  $('#change-password-content button[type=\"submit\"]').removeAttr('disabled');\r\n  $('#login-content button[type=\"submit\"]').removeAttr('disabled');\r\n}\r\n","var Popups = {\r\n\r\n  showPopup: function (url, data, container, modalWindow, success) {\r\n    container.html('');\r\n    var containerHeight = $(window).height() * 0.65;\r\n    $('#modal-spinner').attr('style', 'height:' + containerHeight + 'px;');\r\n    var spinnerHtml = $('#modal-spinner-container').html();\r\n\r\n    modalWindow.modal({\r\n      backdrop: 'static'\r\n    });\r\n    container.html(spinnerHtml);\r\n\r\n    $.ajax({\r\n      url: url,\r\n      contentType: 'application/html; charset=utf-8',\r\n      type: 'GET',\r\n      dataType: 'html',\r\n      data: data\r\n    }).success(function (result) {\r\n      container.html(result);\r\n      if (success != null) {\r\n        success(result);\r\n      }\r\n    }).error(function (xhr, status) {\r\n      container.html('<div class=\"modal-header modal-header--custom\"> <button type=\"button\" class=\"close pull-right\" data-dismiss=\"modal\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button><div><div class=\"modal-body\"> Ошибка открытия формы <div>');\r\n      console.log(status);\r\n    });\r\n  },\r\n\r\n  showPopupForModelId: function (url, id, modalControl, modalbodyControl, success) {\r\n    showPopup(url, { id: id }, modalControl, modalbodyControl, success);\r\n  },\r\n\r\n  showPopupWithAction: function (url, action, id, modalControl, modalContentControl, success) {\r\n    showPopup(url, { partialName: action, id: id }, modalControl, modalContentControl, success);\r\n  },\r\n\r\n  showPopupPost: function (url, formData, container, modalWindow, success) {\r\n    container.html('');\r\n    var containerHeight = $(window).height() * 0.65;\r\n    $('#modal-spinner').attr('style', 'height:' + containerHeight + 'px;');\r\n    var spinnerHtml = $('#modal-spinner-container').html();\r\n\r\n    modalWindow.modal({\r\n      backdrop: 'static'\r\n    });\r\n    container.html(spinnerHtml);\r\n\r\n    $.ajax({\r\n      url: url,\r\n      contentType: false,\r\n      type: 'POST',\r\n      dataType: 'html',\r\n      data: formData,\r\n      processData: false\r\n    }).success(function (result) {\r\n      container.html(result);\r\n      if (success != null) {\r\n        success(result);\r\n      }\r\n    }).error(function (xhr, status) {\r\n      container.html('<div class=\"modal-header modal-header--custom\"> <button type=\"button\" class=\"close pull-right\" data-dismiss=\"modal\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button><div><div class=\"modal-body\"> Ошибка открытия формы <div>');\r\n      console.log(status);\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Показывает диалоговое окно\r\n   * @param {string} htmlContent Контент диалога\r\n   * @param {string} caption Заголовок диалога\r\n   * @returns {} jQuery объект диалога\r\n   */\r\n  show: function (htmlContent, caption) {\r\n\r\n    var $popup = $('#popup');\r\n    if ($popup.length === 0) {\r\n      //если диалог не найден на странице, создаем его\r\n      var tmpl = $('#popup-tmpl').html();\r\n      if (!tmpl) {\r\n        throw {\r\n          message: 'Не найден шаблон диалога #popup-tmpl'\r\n        };\r\n      }\r\n      $popup = $(tmpl).appendTo('body');\r\n    }\r\n\r\n    $popup.find('.modal-headding').html(caption);\r\n    $popup.find('.modal-body').html(htmlContent);\r\n    $popup.modal();\r\n\r\n    return $popup;\r\n  }\r\n}\r\n","var Select2Helper = (function () {\r\n  function findOption(choiseElemet) {\r\n    var title = choiseElemet.attr(\"title\");\r\n    var options = choiseElemet.closest(\"td\").children().first().find(\"option\");\r\n    var option = $.grep(options, function (value) {\r\n      return $(value).html() === title;\r\n    })[0];\r\n\r\n    return $(option);\r\n  }\r\n\r\n  return { findOption: findOption }\r\n})\r\n","var ColumnsFilters = (function () {\r\n\r\n  var timeout = 1000;\r\n\r\n  var delay = (function () {\r\n    var timer = 0;\r\n    return function (callback, ms) {\r\n      clearTimeout(timer);\r\n      timer = setTimeout(callback, ms);\r\n    };\r\n  })();\r\n\r\n  function intMatchFilterAttributeInit(table, filterTd, column) {\r\n    $('input', filterTd).on('keyup change', function () {\r\n      delay(function () {\r\n        var value = $('input', filterTd).val();\r\n        if (column.search() !== value) {\r\n          column.search(value).draw();\r\n        }\r\n      }, timeout);\r\n    });\r\n  }\r\n\r\n  function stringContainsFilterAttributeInit(table, filterTd, column) {\r\n    $('input', filterTd).on('keyup change', function () {\r\n      delay(function () {\r\n        var value = $('input', filterTd).val();\r\n        if (column.search() !== value) {\r\n          column.search(value).draw();\r\n        }\r\n      }, timeout);\r\n    });\r\n  }\r\n\r\n  function dateRangeFilterAttributeInit(table, filterTd, column) {\r\n    var onChange = function () {\r\n      var value = \"\" + $('#from', filterTd).val() + \"|\" + $('#to', filterTd).val();\r\n      if (column.search() !== value) {\r\n        column.search(value).draw();\r\n      }\r\n    }\r\n\r\n    $('#from', filterTd).change(function () {\r\n      delay(onChange, timeout);\r\n    }\r\n    );\r\n    $('#to', filterTd).change(function () {\r\n      delay(onChange, timeout);\r\n    });\r\n  }\r\n\r\n  function decimalRangeFilterAttributeInit(table, filterTd, column) {\r\n    var onChange = function () {\r\n      var value = \"\" + $('#from', filterTd).val() + \"|\" + $('#to', filterTd).val();\r\n      if (column.search() !== value) {\r\n        column.search(value).draw();\r\n      }\r\n    }\r\n\r\n    $('#from', filterTd).change(function () {\r\n      delay(onChange, timeout);\r\n    });\r\n    $('#to', filterTd).change(function () {\r\n      delay(onChange, timeout);\r\n    });\r\n  }\r\n\r\n  function roadSectionServicesCategoriesFilterAttributeInit(table, filterTd, column) {\r\n    $('input', filterTd).on('keyup change', function () {\r\n      delay(function () {\r\n        var value = $('input', filterTd).val();\r\n        if (column.search() !== value) {\r\n          column.search(value).draw();\r\n        }\r\n      }, timeout);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  return {\r\n    intMatchFilterAttributeInit: intMatchFilterAttributeInit,\r\n    stringContainsFilterAttributeInit: stringContainsFilterAttributeInit,\r\n    dateRangeFilterAttributeInit: dateRangeFilterAttributeInit,\r\n    decimalRangeFilterAttributeInit: decimalRangeFilterAttributeInit,\r\n    roadSectionServicesCategoriesFilterAttributeInit: roadSectionServicesCategoriesFilterAttributeInit\r\n  }\r\n})();\r\n"],"sourceRoot":"/source/"}